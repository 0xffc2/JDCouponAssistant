"use strict";var a=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function r(a,s,c){function d(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return d(a[t][1][e]||e)},i,i.exports,r,a,s,c)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)d(c[e]);return d}({1:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils/utils"),i=(a(r,[{key:"get",value:function(){var e=this.detailurl.replace("{pid}",this.couponParams.pid);o.default.createJsonp(e,!0)}},{key:"jsonp",value:function(e){console.log(e);var t=JSON.parse(e.data),n=t.data;n?(this.couponList=[],t.success?(this.couponList.push({pid:n.productId,title:n.name,detail:n.description,imgUrl:n.imgUrl}),this.list()):alert("请检查该页面优惠券的有效性！")):this.outputTextarea.value="领券结果:"+e.data+"\n"+this.outputTextarea.value}},{key:"list",value:function(){var e=this,t=document.createElement("div");t.innerHTML="<h3 style='border-bottom: 1px solid #2196F3;display: inline-block;margin-top: 5px;padding: 0 37.5vw 5px;'>优惠券</h3>",t.setAttribute("style","display:flex;flex-direction:column;padding: 5px;margin-top: 5px;border: 1px solid #000;");for(var n=0;n<this.couponList.length;n++){var o=this.couponList[n],i=document.createElement("div");i.setAttribute("style","display:flex;flex-direction:row;padding:10px 0;border-bottom:1px solid #999"),i.innerHTML='<img style="width:120px;height:100%;margin-right:10vw;display: block;" src="'+o.imgUrl+'" />\n                <div>\n                    <h3 style="margin-bottom:10px">'+o.title+'</h3><p style="margin-bottom:10px">'+o.detail+'</p>\n                    <button class="receive" style="width: 80px;height:30px;background-color: #2196F3;border-radius: 5px;border: 0;">\n                        <a style="color: #fff;text-decoration: none;">直接领取</a>\n                    </button>\n                </div>',t.appendChild(i)}this.container.appendChild(t),document.querySelector(".receive").addEventListener("click",function(){e.send()})}},{key:"send",value:function(){this.outputTextarea.style.display="block";for(var e=0;e<this.couponList.length;e++){var t=this.couponList[e],n=this.url.replace("{pid}",t.pid);o.default.createJsonp(n,!0)}}}]),r);function r(e,t,n){s(this,r),this.url="https://vip.jr.jd.com/goldcoin/purchase?id={pid}&callback=",this.detailurl="https://vip.jr.jd.com/goldcoin/goods/{pid}?callback=",this.couponList=[],this.couponParams=e,this.container=t,this.outputTextarea=n,window.addEventListener("message",this.jsonp.bind(this),!1)}n.default=i},{"../utils/utils":10}],2:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils/utils"),i=(a(r,[{key:"get",value:function(){var i=this;fetch(this.detailurl,{credentials:"include"}).then(function(e){return e.json()}).then(function(e){if(i.couponList=[],0==e.resultCode){for(var t=e.resultData.data.data,n=0;n<t.length;n++){var o=t[n];o&&i.couponList.push({pid:o.productId,exchangeStatus:3==o.exchangeStatus?"已抢光":2==o.exchangeStatus?"已领取":"可领取",detail:o.description,startDate:new Date(o.startDate).toLocaleString(),discountAmount:o.discountAmount,imgUrl:o.imgUrl,flag:!1})}i.list()}else alert("请检查该页面优惠券的有效性！")})}},{key:"jsonp",value:function(e){console.log(e),JSON.parse(e.data).data,this.outputTextarea.value="领券结果:"+e.data+"\n"+this.outputTextarea.value}},{key:"list",value:function(){var o=this,i=document.createElement("div");i.innerHTML="<h3 style='border-bottom: 1px solid #2196F3;display: inline-block;margin-top: 5px;padding: 0 37.5vw 5px;'>优惠券</h3><p style='margin: 5px 0;color:red'>请先点击列表项选择领取的券</p>",i.setAttribute("style","display:flex;flex-direction:column;padding: 5px;margin-top: 5px;border: 1px solid #000;");for(var e=function(e){var n=o.couponList[e],t=document.createElement("div");t.setAttribute("style","display:flex;flex-direction:row;text-align:left;border:1px solid gray;border-radius: 10px;margin-top:5px;padding: 5px"),t.setAttribute("data-item","coupon"),t.innerHTML='<img style="width:120px;height:100%;margin-right:10vw;display: block;" src="'+n.imgUrl+'" />\n                <div>\n                    <h3 style="margin-bottom:10px user-select: none;pointer-events:none;">'+n.detail+'</h3><p style="user-select: none;pointer-events:none;margin-bottom:10px">消耗金币：'+n.discountAmount+"<br>开始时间："+n.startDate+"<br>状态："+n.exchangeStatus+'</p>\n                    <button class="receive" data-id='+e+' style="width: 80px;height:30px;background-color: #2196F3;border-radius: 5px;border: 0;">\n                        <a style="color: #fff;text-decoration: none;user-select: none;pointer-events:none;">直接领取</a>\n                    </button>\n                </div>',i.appendChild(t),t.addEventListener("click",function(e){var t=e.target;t.getAttribute("data-item")?(n.flag?t.style.border="1px solid gray":t.style.border="1px solid red",n.flag=!n.flag):t.getAttribute("data-id")&&o.singleSend(+t.getAttribute("data-id"))})},t=0;t<this.couponList.length;t++)e(t);this.container.appendChild(i)}},{key:"send",value:function(){this.outputTextarea.style.display="block";for(var e=0;e<this.couponList.length;e++){var t=this.couponList[e],n=this.url.replace("{pid}",t.pid);t.flag&&o.default.createJsonp(n,!0)}}},{key:"singleSend",value:function(e){this.outputTextarea.style.display="block";var t=this.couponList[e],n=this.url.replace("{pid}",t.pid);o.default.createJsonp(n,!0)}}]),r);function r(e,t,n){s(this,r),this.url="https://vip.jr.jd.com/goldcoin/purchase?id={pid}&callback=",this.detailurl="https://ms.jr.jd.com/gw/generic/hy/h5/m/gateFloorById?reqData={%22floorId%22:44,%22pageChannel%22:%22spike%22}",this.couponList=[],this.couponParams=e,this.container=t,this.outputTextarea=n,window.addEventListener("message",this.jsonp.bind(this),!1)}n.default=i},{"../utils/utils":10}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils/utils"),i=(a(r,[{key:"get",value:function(){this.couponList=[];var e=window._couponData.batchinfo,t=[];for(var n in e)t&&t instanceof Array&&(t=e[n]);for(var o=0;o<t.length;o++){var i=t[o],r=i.limitStr,a=i.discount,s=i.quota,c=i.constraintBeginTime,d=i.constraintEndTime;this.couponList.push({limitStr:r,discount:a,constraintEndTime:d,constraintBeginTime:c,quota:s,flag:!1})}this.list()}},{key:"list",value:function(){var o=this,i=document.createElement("div");i.innerHTML="<h3 style='border-bottom: 1px solid #2196F3;display: inline-block;margin-top: 5px;padding: 0 37.5vw 5px;'>优惠券</h3><p style='margin: 5px 0;color:red'>请先点击列表项选择领取的券</p>",i.setAttribute("style","display:flex;flex-direction:column;padding: 5px;margin-top: 5px;border: 1px solid #000;");for(var e=function(e){var n=o.couponList[e],t=document.createElement("div");t.setAttribute("style","padding:10px 0;border:1px solid gray;border-radius: 10px;margin-top:5px;padding: 5px"),t.setAttribute("data-item","coupon"),t.innerHTML='<h4 style="user-select: none;pointer-events:none;">'+n.quota+"-"+n.discount+'</h4>\n                                <p style="user-select: none;pointer-events:none;margin-bottom:10px">范围：'+n.limitStr+"<br/>时间："+n.constraintBeginTime+"-"+n.constraintEndTime+'</p>\n                                <button data="coupon" style="width: 80px;height:30px;background-color: #2196F3;border-radius: 5px;border: 0;color:#fff;">直接领取</button>',i.appendChild(t),t.addEventListener("click",function(e){var t=e.target;t.getAttribute("data-item")?(n.flag?t.style.border="1px solid gray":t.style.border="1px solid red",n.flag=!n.flag):t.getAttribute("data")&&o.send()})},t=0;t<this.couponList.length;t++)e(t);this.container.appendChild(i)}},{key:"send",value:function(){this.outputTextarea.style.display="block";var e=this.url.replace("{key}",this.couponParams.key).replace("{roleId}",this.couponParams.roleId);o.default.createJsonp(e,!1)}},{key:"jsonp",value:function(e){this.outputTextarea.value="领券结果:"+JSON.stringify(e)+"\n"+this.outputTextarea.value}}]),r);function r(e,t,n){s(this,r),this.url="https://s.m.jd.com/activemcenter/mfreecoupon/getcoupon?key={key}&roleId={roleId}",this.couponList=[],this.couponParams=e,this.container=t,this.outputTextarea=n,window.getcoupon=this.jsonp.bind(this)}n.default=i},{"../utils/utils":10}],4:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var o=(a(i,[{key:"get",value:function(){this.couponList=[];for(var e=window.__react_data__.activityData.floorList,t=0;t<e.length;t++){var n=e[t];if("free_coupon"==n.template||"finance_coupon"==n.template)for(var o=0;o<n.couponList.length;o++){var i=n.couponList[o],r=i.scene,a=i.args||i.cpId,s=i.jsonSrv?JSON.parse(i.jsonSrv).cid:"",c=i.discount,d=i.picUrl||i.picture,l=i.status,u=i.limit+","+i.scope;this.couponList.push({discount:c,details:u,scene:r,args:a,status:l,couponbatch:s,picUrl:d,flag:!1})}}this.list()}},{key:"list",value:function(){var o=this,i=document.createElement("div");i.innerHTML="<h3 style='border-bottom: 1px solid #2196F3;display: inline-block;margin-top: 5px;padding: 0 37.5vw 5px;'>优惠券</h3><p style='margin: 5px 0;color:red'>请先点击列表项选择领取的券</p>",i.setAttribute("style","display:flex;flex-direction:column;padding: 5px;margin-top: 5px;border: 1px solid #000;");for(var e=function(e){var n=o.couponList[e],t=document.createElement("div");t.setAttribute("style","display:flex;flex-direction:row;padding:10px 0;border:1px solid gray;border-radius: 10px;margin-top:5px;padding: 5px"),t.setAttribute("data-item","coupon"),"1"==n.scene?t.innerHTML='<img style="user-select: none;pointer-events:none;width:120px;height:100%;padding-right:10vw;display: block;" src="'+n.picUrl+'" />\n                <div">\n                    <p style="user-select: none;pointer-events:none;margin-bottom:10px">状态：'+("0"==n.status?"可领取":"1"==n.status?"已领取":"已领光")+"<br/>说明："+n.details+'</p>\n                    <button style="width: 80px;height:30px;background-color: #2196F3;border-radius: 5px;border: 0;">\n                        <a href=\'https://so.m.jd.com/list/couponSearch.action?couponbatch='+n.couponbatch+'\' target="_blank" style="color: #fff;text-decoration: none;">可用商品</a>\n                    </button>\n                    <button style="width: 80px;height:30px;background-color: #2196F3;border-radius: 5px;border: 0;">\n                        <a href=\'https://api.m.jd.com/client.action?functionId=newBabelAwardCollection&body={"activityId":"'+o.couponParams.activityId+'","scene":'+n.scene+',"args":"'+n.args+'"}&client=wh5\' target="_blank" style="color: #fff;text-decoration: none;">直接领取</a>\n                    </button>\n                </div>':"3"==n.scene&&(t.innerHTML='<img style="user-select: none;pointer-events:none;width:120px;height:100%;padding-right:10vw;display: block;" src="'+n.picUrl+'" />\n                <div">\n                <p style="user-select: none;pointer-events:none;margin-bottom:10px">状态：'+("0"==n.status?"可领取":"1"==n.status?"已领取":"已领光")+'</p>\n                <button style="width: 80px;height:30px;background-color: #2196F3;border-radius: 5px;border: 0;">\n                    <a href=\'https://api.m.jd.com/client.action?functionId=newBabelAwardCollection&body={"activityId":"'+o.couponParams.activityId+'","scene":'+n.scene+',"actKey":"'+n.args+'"}&client=wh5\' target="_blank" style="color: #fff;text-decoration: none;">直接领取</a>\n                </button>\n                </div>'),i.appendChild(t),t.addEventListener("click",function(e){var t=e.target;t.getAttribute("data-item")&&(n.flag?t.style.border="1px solid gray":t.style.border="1px solid red",n.flag=!n.flag)})},t=0;t<this.couponList.length;t++)e(t);this.container.appendChild(i)}},{key:"send",value:function(){var o=this;this.outputTextarea.style.display="block";for(var e=function(t){var e=o.couponList[t],n="";"1"==e.scene?n='https://api.m.jd.com/client.action?functionId=newBabelAwardCollection&body={"activityId":"'+o.couponParams.activityId+'","scene":'+e.scene+',"args":"'+e.args+'"}&client=wh5':"3"==e.scene&&(n='https://api.m.jd.com/client.action?functionId=newBabelAwardCollection&body={"activityId":"'+o.couponParams.activityId+'","scene":'+e.scene+',"actKey":"'+e.args+'"}&client=wh5'),e.flag&&fetch(n,{credentials:"include"}).then(function(e){return e.json()}).then(function(e){e.errmsg?o.outputTextarea.value="第"+(t+1)+"张 领券结果:"+e.errmsg+"\n"+o.outputTextarea.value:o.outputTextarea.value="第"+(t+1)+"张 领券结果:"+e.subCodeMsg+"\n"+o.outputTextarea.value})},t=0;t<this.couponList.length;t++)e(t)}}]),i);function i(e,t,n){s(this,i),this.url="https://api.m.jd.com/client.action?functionId=newBabelAwardCollection",this.couponList=[],this.couponParams=e,this.container=t,this.outputTextarea=n}n.default=o},{}],5:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils/utils"),i=(a(r,[{key:"get",value:function(){var e=this.detailurl.replace("{pid}",this.couponParams.pid);o.default.createJsonp(e,!0)}},{key:"jsonp",value:function(e){console.log(e);var t=JSON.parse(e.data),n=t.data;n?(this.couponList=[],t.success?(this.couponList.push({pid:n.productId,title:n.name,detail:n.description,imgUrl:n.imgUrl}),this.list()):alert("请检查该页面优惠券的有效性！")):this.outputTextarea.value="领券结果:"+e.data+"\n"+this.outputTextarea.value}},{key:"list",value:function(){var e=this,t=document.createElement("div");t.innerHTML="<h3 style='border-bottom: 1px solid #2196F3;display: inline-block;margin-top: 5px;padding: 0 37.5vw 5px;'>优惠券</h3>",t.setAttribute("style","display:flex;flex-direction:column;padding: 5px;margin-top: 5px;border: 1px solid #000;");for(var n=0;n<this.couponList.length;n++){var o=this.couponList[n],i=document.createElement("div");i.setAttribute("style","display:flex;flex-direction:row;padding:10px 0;border-bottom:1px solid #999"),i.innerHTML='<img style="width:120px;height:100%;margin-right:10vw;display: block;" src="'+o.imgUrl+'" />\n                <div>\n                    <h3 style="margin-bottom:10px">'+o.title+'</h3><p style="margin-bottom:10px">'+o.detail+'</p>\n                    <button class="receive" style="width: 80px;height:30px;background-color: #2196F3;border-radius: 5px;border: 0;">\n                        <a style="color: #fff;text-decoration: none;">直接领取</a>\n                    </button>\n                </div>',t.appendChild(i)}this.container.appendChild(t),document.querySelector(".receive").addEventListener("click",function(){e.send()})}},{key:"send",value:function(){this.outputTextarea.style.display="block";for(var e=0;e<this.couponList.length;e++){var t=this.couponList[e],n=this.url.replace("{pid}",t.pid);o.default.createJsonp(n,!0)}}}]),r);function r(e,t,n){s(this,r),this.url="https://vip.jr.jd.com/goldcoin/purchase?id={pid}&callback=",this.detailurl="https://vip.jr.jd.com/goldcoin/product/{pid}?callback=",this.couponList=[],this.couponParams=e,this.container=t,this.outputTextarea=n,window.addEventListener("message",this.jsonp.bind(this),!1)}n.default=i},{"../utils/utils":10}],6:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var o=(a(i,[{key:"get",value:function(){var u=this;this.couponList=[],fetch(this.detailurl,{credentials:"include"}).then(function(e){return e.json()}).then(function(e){for(var t=e.rs.wholeCategoryCoupon,n=0;n<t.length;n++){var o=t[n],i=o.giftAmount,r=o.discount,a=o.quota,s=o.couponState,c=o.activtyId,d=o.limitStr,l=o.hour;u.couponList.push({giftAmount:i,activityId:c,discount:r,quota:a,hour:l,limitStr:d,couponState:s,flag:!1})}u.list()})}},{key:"list",value:function(){var o=this,i=document.createElement("div");i.innerHTML="<h3 style='border-bottom: 1px solid #2196F3;display: inline-block;margin-top: 5px;padding: 0 37.5vw 5px;'>优惠券</h3><p style='margin: 5px 0;color:red'>点击列表项选择要领取的券</p>",i.setAttribute("style","display:flex;flex-direction:column;padding: 5px;margin-top: 5px;border: 1px solid #000;");for(var e=function(e){var n=o.couponList[e],t=document.createElement("div");t.setAttribute("style","text-align:left;border:1px solid gray;border-radius: 10px;margin-top:5px;padding: 5px"),t.setAttribute("data-item","coupon"),t.innerHTML='<h3 style="user-select: none;pointer-events:none;">折扣：'+n.quota+"-"+n.discount+'</h3>\n                                    <p style="margin-bottom:10px;user-select: none;pointer-events:none;">状态：'+(1==n.couponState?"可领取":6==n.couponState?"已领光":"不可领取")+"<br/>说明："+n.limitStr+"<br/>兑换礼金："+n.giftAmount+"<br/>领取时间："+(n.hour||"现在可领")+'</p>\n                                    <button class="receive" data-id='+e+' style="width: 80px;height:30px;background-color: #2196F3;border-radius: 5px;border: 0;color:#fff;">直接领取</button>',i.appendChild(t),t.addEventListener("click",function(e){var t=e.target;t.getAttribute("data-item")?(n.flag?t.style.border="1px solid gray":t.style.border="1px solid red",n.flag=!n.flag):t.getAttribute("data-id")&&o.singleSend(+t.getAttribute("data-id"))},!1)},t=0;t<this.couponList.length;t++)e(t);this.container.appendChild(i)}},{key:"send",value:function(){var o=this;this.outputTextarea.style.display="block";for(var e=function(e){var t=o.couponList[e],n=o.url.replace("{activityId}",t.activityId);t.flag&&fetch(n,{credentials:"include"}).then(function(e){return e.json()}).then(function(e){o.outputTextarea.value=t.quota+"-"+t.discount+" 领券结果:"+e.msg+"\n"+o.outputTextarea.value})},t=0;t<this.couponList.length;t++)e(t)}},{key:"singleSend",value:function(e){var t=this;this.outputTextarea.style.display="block";var n=this.couponList[e],o=this.url.replace("{activityId}",n.activityId);fetch(o,{credentials:"include"}).then(function(e){return e.json()}).then(function(e){t.outputTextarea.value=n.quota+"-"+n.discount+" 领券结果:"+e.msg+"\n"+t.outputTextarea.value})}}]),i);function i(e,t,n){s(this,i),this.url="https://rsp.jd.com/coupon/receiveDayCoupon/v1?locationCode=10002&lt=m&an=plus.mobile&getType=1&discount=10&couponKey=&platform=3&eventId=MPlusCoupon_Get&eid=&fp=&getType=1&activityId={activityId}",this.detailurl="https://rsp.jd.com/coupon/dayCouponList/v1/?lt=m&an=plus.mobile&couponType=0_1",this.couponList=[],this.couponParams=e,this.container=t,this.outputTextarea=n}n.default=o},{}],7:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var o=(a(i,[{key:"get",value:function(){var p=this;this.couponList=[],fetch(this.detailurl,{credentials:"include"}).then(function(e){return e.json()}).then(function(e){for(var t=e.data.hotFloor.resultList,n=0;n<t.length;n++){var o=t[n],i=o.name,r=o.disCount,a=o.quota,s=o.skuImage,c=o.skuId,d=o.time,l=o.putKey,u=o.batchId;p.couponList.push({name:i,putKey:l,skuImage:s,discount:r,quota:a,skuId:c,batchId:u,time:d,flag:!1})}p.list()})}},{key:"list",value:function(){var o=this,i=document.createElement("div");i.innerHTML="<h3 style='border-bottom: 1px solid #2196F3;display: inline-block;margin-top: 5px;padding: 0 37.5vw 5px;'>优惠券</h3><p style='margin: 5px 0;color:red'>请先点击列表项选择领取的券</p>",i.setAttribute("style","display:flex;flex-direction:column;padding: 5px;margin-top: 5px;border: 1px solid #000;");for(var e=function(e){var n=o.couponList[e],t=document.createElement("div");t.setAttribute("style","display:flex;flex-direction:row;padding:10px 0;border:1px solid gray;border-radius: 10px;margin-top:5px;padding: 5px"),t.setAttribute("data-item","coupon"),t.innerHTML='<img style="user-select: none;pointer-events:none;width:120px;height:100%;padding-right:10vw;display: block;" src="'+n.skuImage+'" />\n                                <div style="text-align: left">\n                                <h4 style="user-select: none;pointer-events:none;">'+n.name+'</h4>\n                                <p style="user-select: none;pointer-events:none;margin-bottom:10px">折扣：'+n.quota+"-"+n.discount+"<br/>下场时间："+n.time+'</p>\n                                <button  class="receive" data-id='+e+' style="width: 80px;height:30px;background-color: #2196F3;border-radius: 5px;border: 0;color:#fff;">直接领取</button>\n                                </div>',i.appendChild(t),t.addEventListener("click",function(e){var t=e.target;t.getAttribute("data-item")?(n.flag?t.style.border="1px solid gray":t.style.border="1px solid red",n.flag=!n.flag):t.getAttribute("data-id")&&o.singleSend(+t.getAttribute("data-id"))})},t=0;t<this.couponList.length;t++)e(t);this.container.appendChild(i)}},{key:"send",value:function(){var o=this;this.outputTextarea.style.display="block";for(var e=function(e){var t=o.couponList[e],n='https://api.m.jd.com/client.action?functionId=receiveSeckillCoupon&body=%7B"roleId"%3A"'+encodeURIComponent(t.putKey)+'"%2C"source"%3A"home_subsidy"%2C"floorType"%3A0%2C"skuId"%3A"'+t.skuId+'"%2C"quota"%3A"'+t.quota+'"%2C"disCount"%3A"'+t.discount+'"%2C"batchId"%3A"'+t.batchId+'"%7D&client=m&appid=XPMSGC2019';fetch(n,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.json()}).then(function(e){o.outputTextarea.value=t.quota+"-"+t.discount+" 领券结果:"+e.resultMsg+"\n"+o.outputTextarea.value})},t=0;t<this.couponList.length;t++)e(t)}},{key:"singleSend",value:function(e){var t=this;this.outputTextarea.style.display="block";var n=this.couponList[e],o='https://api.m.jd.com/client.action?functionId=receiveSeckillCoupon&body=%7B"roleId"%3A"'+encodeURIComponent(n.putKey)+'"%2C"source"%3A"home_subsidy"%2C"floorType"%3A0%2C"skuId"%3A"'+n.skuId+'"%2C"quota"%3A"'+n.quota+'"%2C"disCount"%3A"'+n.discount+'"%2C"batchId"%3A"'+n.batchId+'"%7D&client=m&appid=XPMSGC2019';fetch(o,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.json()}).then(function(e){t.outputTextarea.value=n.quota+"-"+n.discount+" 领券结果:"+e.resultMsg+"\n"+t.outputTextarea.value})}}]),i);function i(e,t,n){s(this,i),this.url="https://api.m.jd.com/client.action?functionId=newBabelAwardCollection",this.detailurl="https://api.m.jd.com/client.action?functionId=getBillionSubsidyInfo&body=%7B%22source%22:%22home_subsidy%22%7D&appid=XPMSGC2019",this.couponList=[],this.couponParams=e,this.container=t,this.outputTextarea=n}n.default=o},{}],8:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var o=(a(i,[{key:"get",value:function(){var n=this;this.couponList=[];var e=this.detailurl.replace("{couponBusinessId}",this.couponParams.couponBusinessId);fetch(e).then(function(e){return e.json()}).then(function(e){var t=JSON.parse(e.data).baiCouponInfo;e.isSuccess?(n.couponList.push({couponBusinessId:JSON.parse(e.data).baiCouponDetailsNext.couponBusinessId,platform:t.platform,title:t.title,detail:t.detail}),n.list()):alert("请检查该页面优惠券的有效性！")})}},{key:"list",value:function(){var e=document.createElement("div");e.innerHTML="<h3 style='border-bottom: 1px solid #2196F3;display: inline-block;margin-top: 5px;padding: 0 37.5vw 5px;'>优惠券</h3>",e.setAttribute("style","display:flex;flex-direction:column;padding: 5px;margin-top: 5px;border: 1px solid #000;");for(var t=0;t<this.couponList.length;t++){var n=this.couponList[t],o=document.createElement("div");o.setAttribute("style","padding:10px 0;border-bottom:1px solid #999"),o.innerHTML="<h3>"+n.title+"</h3><p>"+n.detail+"</p><p>可用范围："+n.platform+'</p>\n                                <button style="width: 80px;height:30px;background-color: #2196F3;border-radius: 5px;border: 0;">\n                                    <a href=\'http://opencredit.jd.com/act/get/coupon?couponBusinessId='+n.couponBusinessId+'&actId=004\' target="_blank" style="color: #fff;text-decoration: none;">直接领取</a>\n                                </button>',e.appendChild(o)}this.container.appendChild(e)}},{key:"send",value:function(){var o=this;this.outputTextarea.style.display="block";for(var e=function(t){var e=o.couponList[t],n=o.url.replace("{couponBusinessId}",e.couponBusinessId);fetch(n).then(function(e){return e.json()}).then(function(e){e.isSuccess?o.outputTextarea.value="第"+(t+1)+"张 领券结果:领取成功！}\n"+o.outputTextarea.value:o.outputTextarea.value="第"+(t+1)+"张 领券结果:领取失败！\n"+o.outputTextarea.value})},t=0;t<this.couponList.length;t++)e(t)}}]),i);function i(e,t,n){s(this,i),this.url="https://opencredit.jd.com/act/get/coupon?couponBusinessId={couponBusinessId}&actId=004",this.detailurl="http://opencredit.jd.com/act/get/couponInfo?couponBusinessId={couponBusinessId}",this.couponList=[],this.couponParams=e,this.container=t,this.outputTextarea=n}n.default=o},{}],9:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var c,o,d=e("./coupons/newBabelAwardCollection"),l=e("./utils/utils"),u=e("./coupons/whtieCoupon"),p=e("./coupons/purchase"),h=e("./coupons/receiveDayCoupon"),f=e("./coupons/secKillCoupon"),m=e("./coupons/mfreecoupon"),g=e("./coupons/coinPurchase"),v=e("./coupons/gcConvert");(o=c=c||{})[o.none=0]="none",o[o.receiveCoupons=1]="receiveCoupons",o.newBabelAwardCollection="newBabelAwardCollection",o.whiteCoupon="whiteCoupon",o.purchase="purchase",o.receiveDayCoupon="receiveDayCoupon",o.secKillCoupon="secKillCoupon",o.mfreecoupon="mfreecoupon",o.coinPurchase="coinPurchase",o.GcConvert="GcConvert";var b=void 0,y=window.location.href,x=!1,k=0,w=500,T=0,i=void 0,r=void 0,L=document.createElement("div"),C=document.createElement("div"),I=document.createElement("div"),j=document.createElement("div"),A=document.createElement("input"),S=document.createElement("button"),M=document.createElement("div"),E=document.createElement("input"),_=document.createElement("div"),B=document.createElement("button"),P=document.createElement("button"),D=document.createElement("textarea"),H=document.createElement("div"),O=document.createElement("div"),q=document.createElement("div"),F=document.createElement("div");function N(){fetch("https://api.m.jd.com/client.action?functionId=babelActivityGetShareInfo&client=wh5").then(function(e){return e.json()}).then(function(e){i=l.default.formatDate(e.time),r=new Date(+e.time).toLocaleString()+":"+i.substr(-3,3),I.innerHTML="京东时间："+r+"<br/>当前获取时间的间隔频率："+w+"毫秒",x&&k<=+i&&(D.value+="定时领取开始！当前时间："+r+"\n",x=!x,b&&b.send(D),E.disabled=x,P.innerHTML="定时指定领取",D.value+="定时领取已结束！\n")})}Object.assign(window,{getLoginMsg:function(e){e.base.nickname&&(F.innerHTML="当前帐号："+e.base.nickname)},krapnik:function(e){}});var a;!function(e){switch(document.querySelector("html").style.fontSize="18px",document.body.innerHTML="",document.body.style.backgroundColor="#ffffff",document.body.style.textAlign="center",document.body.style.maxWidth="100vw",L.setAttribute("style","border: 1px solid #000;padding: 5px;margin: 5px;"),C.innerHTML='<h1 style="font-weight:700">京东领券助手V0.2</h1>\n                        <h3>author:krapnik</h3>\n                        <div style="display: flex;flex-direction: row;justify-content: center;">\n                        <iframe src="https://ghbtns.com/github-btn.html?user=krapnikkk&repo=JDCouponAssistant&type=star&count=true" frameborder="0" scrolling="0" width="80px" height="21px"></iframe>\n                        <a href="tencent://message/?uin=708873725Menu=yes" target="_blank" title="发起QQ聊天"><img src="http://bizapp.qq.com/webimg/01_online.gif" alt="QQ" style="margin:0px;"></a>\n                        </div>',L.append(C),document.body.append(L),O.setAttribute("style","border: 1px solid #000;margin:10px"),O.innerHTML='<h3 style=\'border-bottom: 1px solid #2196F3;display: inline-block;margin: 5px;\'>推广区</h3>\n    <p style="color:red;font-weight:bold;"><a style="color:red" href="https://u.jd.com/A0evWi" target="_blank">每天三个年货红包</a> | <a  style="color:red" href="http://krapnik.cn/project/jd/dayTask.html" target="_blank">每日京东红包汇总</a></p>',L.append(O),q.setAttribute("style","border: 1px solid #000;margin:10px"),q.innerHTML='<h3 style=\'border-bottom: 1px solid #2196F3;display: inline-block;margin: 5px;\'>每天好券推荐【建设中...】</h3>\n    <p style="color:red;font-weight:bold;"><a style="color:red" href="https://m.jr.jd.com/member/9GcConvert/?channel=01-shouye-191214" target="_blank">9金币抢兑</a> | <a  style="color:red" href="https://coupon.m.jd.com/coupons/show.action?key=26ef0709795d4fb793d41e7a8b0acac2&roleId=26885907&to=https://shop.m.jd.com/?shopId=1000132921&sceneval=2&time=1577796913938" target="_blank">自营键鼠199-100</a></p>',L.append(q),e){case c.none:break;case c.newBabelAwardCollection:var t=y.match(/active\/(\S*)\/index/)[1];b=new d.default({activityId:t},L,D);break;case c.whiteCoupon:var n=l.default.GetQueryString("couponBusinessId");b=new u.default({couponBusinessId:n},L,D);break;case c.purchase:var o=l.default.GetQueryString("pid");b=new p.default({pid:o},L,D);break;case c.coinPurchase:var i=l.default.GetQueryString("gid");b=new g.default({pid:i},L,D);break;case c.receiveDayCoupon:b=new h.default(null,L,D);break;case c.secKillCoupon:b=new f.default(null,L,D);break;case c.GcConvert:b=new v.default(null,L,D);break;case c.mfreecoupon:var r=l.default.GetQueryString("roleId"),a=l.default.GetQueryString("key");b=new m.default({roleId:r,key:a},L,D)}var s;b?(T=window.setInterval(N,w),H.setAttribute("style","border: 1px solid #000;"),H.innerHTML="<h3 style='border-bottom: 1px solid #2196F3;display: inline-block;margin: 5px;padding: 0 37.5vw 5px;'>操作区</h3>",F.innerHTML="当前帐号：未登录",A.type="text",A.placeholder="请输入获取时间的刷新频率【毫秒】",A.setAttribute("style","width:80vw;height: 25px;border: solid 1px #000;border-radius: 5px;margin: 10px auto;display: block;"),S.innerHTML="重置频率",S.setAttribute("style","width: 80px;height:30px;background-color: #2196F3;border-radius: 5px;border: 0;color:#fff;"),S.addEventListener("click",function(){var e=Math.trunc(+A.value);if(!w)return alert("请检查输入的刷新频率是否有误！(只能为大于0的数字)"),!1;w=e,window.clearInterval(T),T=window.setInterval(N,w)}),E.type="text",E.placeholder="定时领券时间【格式:13:59:59:950】",E.setAttribute("style","width:80vw;height: 25px;border: solid 1px #000;border-radius: 5px;margin: 10px;"),P.innerHTML="定时指定领取",P.addEventListener("click",function(){var e=l.default.formateTime(E.value);if(!e||e<0)return alert("请检查定时领券时间的格式是否有误！"),!1;x=!x,k=e,D.style.display="block",(E.disabled=x)?(P.innerHTML="取消指定领取",D.value+="已开启定时领取\n"):(P.innerHTML="定时指定领取",D.value+="已关闭定时领取\n")}),B.addEventListener("click",function(){b&&b.send(D)}),P.setAttribute("style","width: 120px;height:30px;background-color: #2196F3;border-radius: 5px;border: 0;color:#fff;margin:5px;"),B.innerHTML="一键指定领取",B.setAttribute("style","width: 120px;height:30px;background-color: #2196F3;border-radius: 5px;border: 0;color:#fff;margin:5px;"),D.setAttribute("style","width: 90vw;height: 40vw;border: 1px solid #868686;border-radius: 10px;overflow-y: scroll;margin:5px auto;display:none"),D.setAttribute("disabled","disabled"),L.append(H),H.append(F),H.append(j),j.append(I),j.append(A),j.append(S),H.append(M),M.append(E),M.append(_),_.append(B),_.append(P),H.append(D),b.get()):((s=document.createElement("h4")).innerHTML="<h4>这个页面好像还没有被扩展或者有误哦<br/>联系作者扩展或者咨询一下吧~</h4>",C.append(s)),l.default.createJsonp("https://wq.jd.com/user/info/QueryJDUserInfo?sceneid=11110&sceneval=2&g_login_type=1&callback=getLoginMsg")}((a=c.none,window.location.host.includes("jd.com")&&(window.__react_data__?a=c.newBabelAwardCollection:window.Queries?a=c.whiteCoupon:y.includes("gcmall/index.html#/details?pid=")?a=c.purchase:y.includes("member/gcmall/index.html#/details?gid")?a=c.coinPurchase:y.includes("plus.m.jd.com/coupon/")?a=c.receiveDayCoupon:y.includes("9GcConvert")?a=c.GcConvert:/babelDiy\/(\S*)\/index/.test(y)?a=c.secKillCoupon:/coupons\/show.action\?key=(\S*)&roleId=(\S*)/.test(y)&&(a=c.mfreecoupon)),a)),console.clear(),window.console&&(console.group("%c京东领券助手","color:#009a61; font-size: 28px; font-weight: 200"),console.log("%c本插件仅供学习交流使用\n作者:krapnik \ngithub:https://github.com/krapnikkk/JDCouponAssistant","color:#009a61"),console.groupEnd()),function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?d86d4ff3f6d089df2b41eb0735194c0d";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),function(){var e=document.createElement("script");document.getElementsByTagName("head")[0].appendChild(e),e.setAttribute("src","https://api.m.jd.com/client.action?functionId=voucherTopSupport&body={%22actId%22:%2200577493%22,%22userCode%22:%222u4vh%22,%22nickName%22:%22%22,%22picUrl%22:%22%22}&client=wh5&clientVersion=1.0.0&callback=krapnik"),fetch("https://api.m.jd.com/?functionId=sendBless&body={%22activityUUID%22:%22d6d0a5944120457ebc36d36cf5bcb889%22,%22initiatePin%22:%22ggwcJ59Nm7UxX%2Fote7BKF4On8bJjlhOf%22}&client=megatron&clientVersion=1.0.0&t=1577811401856",{credentials:"include"}).then(function(e){return e.json()}).then(function(e){});fetch("https://ms.jr.jd.com/gw/generic/uc/h5/m/openEnvelopNew",{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"reqData="+JSON.stringify({shareId:"lQpOJD2ANodhfTtc592rNzHJjQVZ6t65wB2hQlDcOKQ",wxImageUrl:"",wxNickName:"",riskDeviceParam:'{"macAddress":"","imei":"","eid":"","openUUID":"","uuid":"","traceIp":"","os":"Mac OS X (iPhone)","osVersion":"","appId":"","clientVersion":"","resolution":"","channelInfo":"","networkType":"","startNo":42,"openid":"","token":"","sid":"","terminalType":"","longtitude":"","latitude":"","securityData":"","jscContent":"","fnHttpHead":"","receiveRequestTime":"","port":80,"appType":"6","deviceType":"","fp":"","ip":"","idfa":"","sdkToken":""}',channelLv:"nhj"})}).then(function(e){return e.json()}).then(function(e){fetch("https://ms.jr.jd.com/gw/generic/uc/h5/m/envelopInfoNew",{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"reqData="+JSON.stringify({shareId:"lQpOJD2ANodhfTtc592rNzHJjQVZ6t65wB2hQlDcOKQ",inApp:!1,riskDeviceParam:'{"macAddress":"","imei":"","eid":"","openUUID":"","uuid":"","traceIp":"","os":"Android Mobile","osVersion":"","appId":"","clientVersion":"","resolution":"","channelInfo":"","networkType":"","startNo":42,"openid":"","token":"","sid":"","terminalType":"","longtitude":"","latitude":"","securityData":"","jscContent":"","fnHttpHead":"","receiveRequestTime":"","port":80,"appType":"6","deviceType":"","fp":"","ip":"","idfa":"","sdkToken":""}',channelLv:"nhj"})}).then(function(e){return e.json()}).then(function(e){})})}()},{"./coupons/coinPurchase":1,"./coupons/gcConvert":2,"./coupons/mfreecoupon":3,"./coupons/newBabelAwardCollection":4,"./coupons/purchase":5,"./coupons/receiveDayCoupon":6,"./coupons/secKillCoupon":7,"./coupons/whtieCoupon":8,"./utils/utils":10}],10:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),window.jsonpBind=function(e){o.jsonpBind(JSON.stringify(e))};var o=(a(i,null,[{key:"formateDate",value:function(e){var t=new Date(+e),n=t.getHours(),o=t.getMinutes(),i=t.getSeconds(),r=t.getMilliseconds();return n<10&&(n="0"+n),o<10&&(o="0"+o),i<10&&(i="0"+i),r<10?r="00"+r:r<100&&10<=r&&(r="0"+r),n+""+o+i+r}},{key:"obtainLocal",value:function(e){return e.replace(/(?:(?:^|.*;\s*)3AB9D23F7A4B3C9B\s*=\s*([^;]*).*$)|^.*$/,"$1")}},{key:"getCookie",value:function(){return document.cookie}},{key:"formatDate",value:function(e){var t=new Date(+e),n=t.getHours(),o=t.getMinutes(),i=t.getSeconds(),r=t.getMilliseconds();return n<10&&(n="0"+n),o<10&&(o="0"+o),i<10&&(i="0"+i),r<10?r="00"+r:r<100&&10<=r&&(r="0"+r),n+""+o+i+r}},{key:"GetQueryString",value:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);if(!n){var o=window.location.hash;n=o.substr(o.indexOf("?")+1,o.length-o.indexOf("?")).match(t)}return null!=n?n[2]:""}},{key:"getQueryStringByName",value:function(e){e=e.replace(/#.*/,"");var t=/\?[a-zA-Z0-9\=\&\%\$\-\_\.\+\!\*\'\(\)\,]+/.exec(e);return t?decodeURIComponent(t[0]):""}},{key:"formateTime",value:function(e){return Math.trunc(+e.replace(/[:|：]+/gi,""))}},{key:"createJsonp",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t,o=document.createElement("script");n&&(e+="jsonpBind"),document.getElementsByTagName("head")[0].appendChild(o),o.setAttribute("src",e)}},{key:"jsonpBind",value:function(e){postMessage(e,"*")}}]),i);function i(){s(this,i)}n.default=o},{}]},{},[9]);